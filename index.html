<meta name='viewport' content='width=device-width, initial-scale=1'/><!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>–ë–µ–∑–æ–±–∏–¥–Ω–∞—è —Ä–æ–∑—ã–≥—Ä—ã—à-—à—É—Ç–∫–∞ -- —Ñ–æ–Ω–∞—Ä–∏–∫ + –≤–∏–±—Ä–∞—Ü–∏—è</title>
<style>
  :root{
    --bg:#07070a;
    --card:#101018;
    --accent:#b35bff;
    --text:#f3ecff;
  }
  html,body{height:100%;margin:0;font-family:Inter,Segoe UI,Arial,sans-serif;background:linear-gradient(180deg,#05050a,#0b0820);color:var(--text)}
  .wrap{max-width:900px;margin:20px auto;padding:16px;}
  h1{margin:0 0 6px 0;color:var(--accent)}
  p.small{color:#bdb3e6;margin-top:0}
  .card{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));padding:16px;border-radius:14px;border:1px solid rgba(180,90,255,0.12)}
  .controls{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
  button{padding:10px 12px;border-radius:10px;border:0;background:var(--accent);color:#040006;font-weight:700;cursor:pointer}
  button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--text)}
  #overlayContainer{position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:9999}
  .overlayWin{
    position:absolute;
    min-width:180px;
    max-width:320px;
    background:#0b0a10;
    border-radius:10px;
    border:1px solid rgba(180,90,255,0.14);
    padding:10px;
    box-shadow:0 8px 30px rgba(0,0,0,0.6);
    color:var(--text);
    pointer-events:auto;
    animation:pop .18s ease;
  }
  @keyframes pop{from{transform:translateY(6px) scale(.98);opacity:0}to{transform:none;opacity:1}}
  .fakeCard{margin-top:8px;font-weight:800;color:#ffd3ff;background:rgba(180,90,255,0.06);padding:6px;border-radius:6px}
  #status{margin-top:12px;color:#cfc2ff}
  .smallNote{font-size:13px;color:#bfb5d9;margin-top:8px}
</style>
</head>
<body>
  <div class="wrap">
    
    

    <div class="card">
      <div style="display:flex;gap:8px;flex-wrap:wrap">
        <button id="startBtn">‚ñ∂ –ó–∞–ø—É—Å—Ç–∏—Ç—å —à—É—Ç–∫—É</button>
        
        
      </div>

      <div id="status"></div>
      <div class="smallNote"></div>
    </div>
  </div>

  <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤—Å–ø–ª—ã–≤–∞—é—â–∏—Ö –æ–∫–æ–Ω -->
  <div id="overlayContainer"></div>

<script>
/*
  –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —à—É—Ç–∫–∞:
  - –ü—Ä–æ—Å–∏—Ç permission –¥–ª—è –∫–∞–º–µ—Ä—ã –ø—Ä–∏ –Ω–∞—á–∞–ª–µ (–Ω—É–∂–Ω–æ –¥–ª—è torch)
  - –ú–∏–≥–∞–Ω–∏–µ —Ñ–æ–Ω–∞—Ä–∏–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –≤–∏–±—Ä–∞—Ü–∏–µ–π (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
  - –ù–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –º–Ω–æ–≥–æ "–æ–∫–æ–Ω" —Å —é–º–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
  - –ù–ò–ö–û–ì–î–ê –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–ª–∞—Ç–∏—Ç—å –∏–ª–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ –∫–∞—Ä—Ç
  - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —è–≤–Ω—ã–π —Ñ–µ–π–∫–æ–≤—ã–π "–Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã"
  - –ß–µ—Ä–µ–∑ 60 —Å–µ–∫—É–Ω–¥ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –∑–∞–±–∞–≤–Ω–∞—è —Å—Å—ã–ª–∫–∞ (—Ä–∏–∫—Ä–æ–ª–ª). –ú–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å.
*/

const startBtn = document.getElementById('startBtn');
const stopBtn = document.getElementById('stopBtn');
const testVib = document.getElementById('testVib');
const statusEl = document.getElementById('status');
const overlayContainer = document.getElementById('overlayContainer');

let mediaStream = null;
let track = null;
let torchInterval = null;
let overlayInterval = null;
let openLinkTimeout = null;
let isRunning = false;

const FUN_MESSAGES = [
  "–û—à–∏–±–∫–∞: –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫–∏ –∑–∞–º–µ–Ω–∏–ª–∏ –≤–∞—à–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞ –∫–æ—Ç–∏–∫–æ–≤ üê±",
  "–í–Ω–∏–º–∞–Ω–∏–µ! –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∞—è –¥–æ–∑–∞ —Ö–æ—Ä–æ—à–µ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è üòé",
  "–ü–æ—Ö–æ–∂–µ, —Ç–µ–ª–µ—Ñ–æ–Ω –∑–∞–ø–µ–ª —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ üé§",
  "–ê—Ç–∞–∫–∞ –∫–æ–Ω—Ñ–µ—Ç! üç¨ –í—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -- —Ç–µ–ø–µ—Ä—å —Å–ª–∞–¥–∫–∏–µ",
  "–°–∏—Å—Ç–µ–º–∞ —Å–æ–æ–±—â–∞–µ—Ç: –ø–æ—Ä–∞ —Å–¥–µ–ª–∞—Ç—å –ø–µ—Ä–µ—Ä—ã–≤ –∏ —É–ª—ã–±–Ω—É—Ç—å—Å—è üôÇ",
  "–û–π! –ö—Ç–æ-—Ç–æ –ø–æ–º–µ–Ω—è–ª –≤–∞—à–∏ –±—É–¥–∏–ª—å–Ω–∏–∫–∏ –Ω–∞ –ø–µ—Å–Ω—é '–ù—è–Ω—è-–Ω—è' üé∂",
  "–í–Ω–∏–º–∞–Ω–∏–µ: —Ç–µ–ª–µ—Ñ–æ–Ω –∑–∞—Ä–∞–∑–∏–ª—Å—è –º–µ–º–∞–º–∏ -- –ª–µ—á–µ–Ω–∏–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ üòÇ",
  "–û—à–∏–±–∫–∞: –≤–∞—à–∏ –±–∞—Ç–∞—Ä–µ–π–∫–∏ –∑–∞–º–µ–Ω–∏–ª–∏ –Ω–∞ –±—É—Ç–µ—Ä–±—Ä–æ–¥—ã ü•™",
  "–¢—Ä–µ–≤–æ–≥–∞: —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –º–µ–º–æ–≤ -- –≤–∫–ª—é—á–∏—Ç–µ —á–∞–π–Ω–∏–∫ ‚òï",
  "–°—Ä–∞–∂–µ–Ω–∏–µ —Å –∑–ª–æ–±–Ω–æ–π –ø—ã–ª—å—é –æ–∫–æ–Ω—á–µ–Ω–æ -- –≤—ã –ø–æ–±–µ–¥–∏–ª–∏! üßπ"
];

// –Ø–≤–Ω–æ —Ñ–µ–π–∫–æ–≤—ã–π "–Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã"
const FUN_FAKES = [
  "0000-LOL-1337",
  "1337-COOK-0000",
  "9999-MEOW-000",
  "B0GUS-CARD-9999",
  "FAKE-000-HAHA"
];

function updateStatus(s){
  statusEl.textContent = '–°—Ç–∞—Ç—É—Å: ' + s;
}

/* –ü–æ–ø-–∞–ø –æ–∫–Ω–∞ */
function spawnOverlay(){
  const win = document.createElement('div');
  win.className = 'overlayWin';
  const w = Math.max(180, Math.floor(160 + Math.random()*220));
  win.style.width = w+'px';
  // —Å–ª—É—á–∞–π–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —ç–∫—Ä–∞–Ω–µ
  const x = Math.random()*(window.innerWidth - w - 20) + 10;
  const y = Math.random()*(window.innerHeight - 120) + 60;
  win.style.left = x+'px';
  win.style.top = y+'px';

  // —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
  const msg = FUN_MESSAGES[Math.floor(Math.random()*FUN_MESSAGES.length)];
  win.innerHTML = `<div style="font-weight:700;margin-bottom:6px">–û—à–∏–±–∫–∞</div>
                   <div style="font-size:14px">${msg}</div>
                   <div class="fakeCard">–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã: ${FUN_FAKES[Math.floor(Math.random()*FUN_FAKES.length)]}</div>`;

  // –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É
  win.addEventListener('click', ()=> win.remove());

  overlayContainer.appendChild(win);

  // –∞–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è
  setTimeout(()=> {
    if(win.parentElement) win.remove();
  }, 18_000 + Math.random()*12_000);
}

/* –í–∫–ª—é—á–∞–µ–º / –≤—ã–∫–ª—é—á–∞–µ–º —Ñ–æ–Ω–∞—Ä–∏–∫ (torch) -- —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö Android */
async function enableTorchLoop(){
  if(!mediaStream) return;
  track = mediaStream.getVideoTracks()[0];
  const caps = track.getCapabilities ? track.getCapabilities() : {};
  if(!('torch' in caps)){
    updateStatus('–§–æ–Ω–∞—Ä–∏–∫ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —ç—Ç–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä');
    return;
  }
  // –ú–∏–≥–∞–Ω–∏–µ: –≤–∫–ª—é—á–∞–µ–º-–≤—ã–∫–ª—é—á–∞–µ–º torch —á–µ—Ä–µ–∑ setInterval
  let on = false;
  torchInterval = setInterval(async ()=>{
    try{
      on = !on;
      await track.applyConstraints({advanced:[{torch:on}]});
    }catch(e){
      console.warn('Torch error', e);
    }
  }, 400); // —á–∞—Å—Ç–æ—Ç–∞ –º–∏–≥–∞–Ω–∏—è 400ms (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å)
}

/* –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º torch loop */
async function stopTorchLoop(){
  try{
    if(torchInterval) { clearInterval(torchInterval); torchInterval = null; }
    if(track){
      // –ø–æ–ø—ã—Ç–∫–∞ –≤—ã–∫–ª—é—á–∏—Ç—å torch
      try{ await track.applyConstraints({advanced:[{torch:false}]}); }catch(e){}
      try{ track.stop(); }catch(e){}
      track = null;
    }
    if(mediaStream){
      mediaStream.getTracks().forEach(t=>t.stop());
      mediaStream = null;
    }
  }catch(e){ console.warn(e); }
}

/* –í–∏–±—Ä–∞—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —Å –º–∏–≥–∞–Ω–∏–µ–º:
   –µ—Å–ª–∏ –≤–∏–±—Ä–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞, –∑–∞–ø—É—Å–∫–∞–µ–º –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã, —Å–æ–≤–ø–∞–¥–∞—é—â–∏–µ —Å torch interval
*/
function startVibrationLoop(){
  if(!('vibrate' in navigator)) return;
  // –≤ –Ω–∞—à–µ–º –ø—Ä–∏–º–µ—Ä–µ torch –º–∏–≥–∞–µ—Ç –∫–∞–∂–¥—ã–µ 400ms -- —Å–æ–∑–¥–∞—ë–º –∫–æ—Ä–æ—Ç–∫–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω
  const vibInterval = 400;
  // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª id —á—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–∑–¥–Ω–µ–µ
  let vibOn = true;
  window._vibInterval = setInterval(()=>{
    if(vibOn) navigator.vibrate(150); // –∫–æ—Ä–æ—Ç–∫–∞—è –≤–∏–±—Ä–∞—Ü–∏—è
    vibOn = !vibOn;
  }, vibInterval);
}

function stopVibrationLoop(){
  if(window._vibInterval){ clearInterval(window._vibInterval); window._vibInterval = null; }
  if('vibrate' in navigator) navigator.vibrate(0);
}

/* –ì–ª–∞–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞: –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ –∫–Ω–æ–ø–∫–µ -- –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º getUserMedia (—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ) */
startBtn.addEventListener('click', async ()=>{
  if(isRunning) return;
  isRunning = true;
  updateStatus('–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ –¥–ª—è —Ñ–æ–Ω–∞—Ä–∏–∫–∞...');
  try{
    // –ó–∞–ø—Ä–æ—Å–∏–º video —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º, –Ω–æ –≤–∞–∂–µ–Ω facingMode –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å torch
    mediaStream = await navigator.mediaDevices.getUserMedia({video:{facingMode:'environment'}});
    updateStatus('–î–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ –ø–æ–ª—É—á–µ–Ω -- –∑–∞–ø—É—Å–∫–∞–µ–º –º–æ—Ä–≥–∞–Ω–∏–µ —Ñ–æ–Ω–∞—Ä–∏–∫–∞ –∏ –≤–∏–±—Ä–∞—Ü–∏—é!');
    await enableTorchLoop();
    startVibrationLoop();

    // –ü–æ—è–≤–ª–µ–Ω–∏–µ –≤—Å–ø–ª—ã–≤–∞—é—â–∏—Ö –æ–∫–æ–Ω
    spawnOverlay(); // —Å—Ä–∞–∑—É –æ–¥–Ω–æ
    overlayInterval = setInterval(()=> spawnOverlay(), 900); // –∫–∞–∂–¥—ã–µ 900ms –ø–æ—è–≤–ª–µ–Ω–∏–µ –æ–∫–Ω–∞

    // —á–µ—Ä–µ–∑ 60 —Å–µ–∫—É–Ω–¥ –æ—Ç–∫—Ä—ã–≤–∞–µ–º —Å—Å—ã–ª–∫—É (—Ä–∏–∫—Ä–æ–ª–ª) –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ
    openLinkTimeout = setTimeout(()=>{
      // –æ—Ç–∫—Ä—ã–≤–∞–µ–º –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ -- –±—Ä–∞—É–∑–µ—Ä—ã –º–æ–≥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å, –Ω–æ –ø–æ–ø—ã—Ç–∞–µ–º—Å—è
      window.open('https://www.youtube.com/watch?v=dQw4w9WgXcQ', '_blank');
      updateStatus('–û—Ç–∫—Ä—ã–ª–æ—Å—å –∑–∞–±–∞–≤–Ω–æ–µ –≤–∏–¥–µ–æ (–µ—Å–ª–∏ –±—Ä–∞—É–∑–µ—Ä –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Å–ø–ª—ã–≤–∞—é—â–∏–µ –æ–∫–Ω–∞).');
    }, 60_000);

  }catch(err){
    console.error(err);
    updateStatus('–î–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ –æ—Ç–∫–ª–æ–Ω—ë–Ω –∏–ª–∏ –æ—à–∏–±–∫–∞ -- –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å —Ñ–æ–Ω–∞—Ä–∏–∫.');
    isRunning = false;
  }
});

/* –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ */
stopBtn.addEventListener('click', async ()=>{
  if(!isRunning) return;
  isRunning = false;
  updateStatus('–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —à—É—Ç–∫—É...');
  // –æ—á–∏—Å—Ç–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
  if(overlayInterval) { clearInterval(overlayInterval); overlayInterval = null; }
  if(openLinkTimeout){ clearTimeout(openLinkTimeout); openLinkTimeout = null; }
  // —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –æ–∫–Ω–∞
  overlayContainer.innerHTML = '';
  // –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–∏–±—Ä–∞—Ü–∏–∏ –∏ torch
  stopVibrationLoop();
  await stopTorchLoop();
  updateStatus('–û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ. –ù–∞–¥–µ—é—Å—å, —Ç—ã —É–ª—ã–±–Ω—É–ª—Å—è :)');
});

/* –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ç–µ—Å—Ç –≤–∏–±—Ä–∞—Ü–∏–∏ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ */
testVib.addEventListener('click', ()=>{
  if('vibrate' in navigator){ navigator.vibrate([200,100,200]); updateStatus('–¢–µ—Å—Ç –≤–∏–±—Ä–∞—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω'); }
  else updateStatus('–í–∏–±—Ä–∞—Ü–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —ç—Ç–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ');
});

/* –ü–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã -- –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –æ—á–∏—Å—Ç–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã */
window.addEventListener('beforeunload', async ()=>{
  stopVibrationLoop();
  await stopTorchLoop();
});
</script>
</body>
</html>